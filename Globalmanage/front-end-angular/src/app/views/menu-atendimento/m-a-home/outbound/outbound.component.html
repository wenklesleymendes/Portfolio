<div class="body">

    <div class="main-outbound">

        <mat-toolbar class="mat-elevation-z2 noselect toolbar-titulo">

            <div class="loading-shade" id="carregamento" style="visibility: hidden;">
                <mat-spinner></mat-spinner>
            </div>

            <div class="div-botao-voltar" (click)="goToHome()">
                <button mat-button class="botao-voltar">
                    <p class="p-botao-voltar">
                        <mat-icon style="padding: 5%;"> navigate_before </mat-icon>
                        Voltar
                    </p>
                </button>
            </div>

            <span class="barra-topo"></span>

            <div class="div-outbound">
                <p class="p-outbound">
                    Outbound da Unidade {{nomeUnidade}}
                </p>
            </div>

        </mat-toolbar>

        <div class="div-body">

            <div class="div-cadastro">
                <!-- cadastro -->

                <div class="div-padding-cadastro">

                    <div class="content" *ngIf="!isLoadingResults">

                        <app-form-cliente [atendimento]="outbound"></app-form-cliente>

                    </div>

                </div>

            </div>

            <div class="div-espaco-entre-mat-cards"></div>

            <div class="div-tentativas-contato">
                <!-- tentativas de contato -->

                <div class="div-padding-tentativa">

                    <div class="content" *ngIf="!isLoadingResults">

                        <form [formGroup]="formTentativa">

                            <div class="grid grid--auto-fill">

                                <div class="div-cadastro-tentativas">
                                    <p class="p-cadastro-contato">
                                        <strong> Outbound: Nº {{ outboundNumero }} </strong>
                                        <strong> Score Atual: {{ scoreAplicado }} </strong>
                                    </p>
                                </div>

                                <mat-form-field style="pointer-events: none;">
                                    <mat-label>Data e Hora do Atendimento</mat-label>
                                    <input formControlName="dataeHoradoContato" matInput type="datetime">
                                </mat-form-field>

                                <mat-form-field *ngIf="usuariosUnidade; else loading">

                                    <mat-label>Usuário do cadastro</mat-label>

                                    <mat-select formControlName="selecioneSeuLogin">

                                        <mat-option *ngFor="let usuario of usuariosUnidade" [value]="usuario.id">
                                            {{ usuario.userName }}
                                        </mat-option>

                                    </mat-select>

                                </mat-form-field>

                                <mat-form-field>
                                    <mat-label>Matrícula Agendada</mat-label>
                                    <mat-select formControlName="existeAgendamento"
                                        (selectionChange)="agendamentoSimNao()">
                                        <mat-option [value]="1"> Secretaria </mat-option>
                                        <mat-option [value]="2"> Delivery </mat-option>
                                        <mat-option [value]="3"> Não </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <!-- Agendamentos no caso de Sim-->
                                <mat-form-field *ngIf="agendamentoSim == 1 || agendamentoSim == 2">
                                    <mat-label>Dia do Agendamento</mat-label>
                                    <input formControlName="diadoAgendamento" matInput [min]="minDate"
                                        [matDatepicker]="picker1" readonly=“true”>
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker touchUi #picker1></mat-datepicker>
                                </mat-form-field>

                                <mat-form-field *ngIf="agendamentoSim == 1 || agendamentoSim == 2">
                                    <mat-label>Hora do Agendamento</mat-label>
                                    <input formControlName="horadoAgendamento" type="time" matInput>
                                </mat-form-field>

                                <!-- Agendamentos no caso de Não-->
                                <mat-form-field *ngIf="agendamentoSim == 3">
                                    <mat-label>Motivo do Não Agendamento</mat-label>
                                    <mat-select formControlName="motivodoNaoAgendamento"
                                        (selectionChange)="motivoAgendamentoSimNao()">
                                        <mat-option [value]="1"> Cliente Está Indeciso </mat-option>
                                        <mat-option [value]="2"> Desempregado </mat-option>
                                        <mat-option [value]="3"> Sem condições financeiras </mat-option>
                                        <mat-option [value]="4"> Para outra pessoa </mat-option>
                                        <mat-option [value]="5"> Confirmar com terceiros </mat-option>
                                        <mat-option [value]="6"> Não tem idade para matricula </mat-option>
                                        <mat-option [value]="7"> Ligação Caiu </mat-option>
                                        <mat-option [value]="8"> Telefone Incorreto ou Não Existe </mat-option>
                                        <mat-option [value]="9"> Já matriculado em nossa escola </mat-option>
                                        <mat-option [value]="10"> Realizou matricula em outra escola </mat-option>
                                        <mat-option [value]="11"> Não tem mais interesse </mat-option>
                                        <mat-option [value]="12"> Caixa postal </mat-option>
                                        <mat-option [value]="13"> Não atende </mat-option>
                                        <mat-option [value]="14"> Agendou horário para retorno </mat-option>
                                        <mat-option [value]="15"> Lançamento Mídias </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <!-- Agendou horário para retorno caso Sim -->
                                <mat-form-field *ngIf="motivoAgendamentoSim == 1">
                                    <mat-label>Dia do Agendamento</mat-label>
                                    <input formControlName="diadoAgendamento" matInput [min]="minDate"
                                        [matDatepicker]="picker1">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker touchUi #picker1></mat-datepicker>
                                </mat-form-field>

                                <mat-form-field *ngIf="motivoAgendamentoSim == 1">
                                    <mat-label>Hora do Agendamento</mat-label>
                                    <input formControlName="horadoAgendamento" type="time" matInput>
                                </mat-form-field>

                                <mat-form-field>
                                    <mat-label> Observações </mat-label>
                                    <textarea formControlName="observacao" matInput></textarea>
                                </mat-form-field>

                            </div>

                            <div class="div-botoes">

                                <button mat-raised-button class="b-enviar" (click)="enviarSair()">
                                    <p class="p-enviar">Enviar e Sair</p>
                                </button>

                                <button mat-raised-button class="b-enviar" (click)="enviarProximo()">
                                    <p class="p-enviar">Enviar e Próximo</p>
                                </button>

                            </div>

                        </form>

                    </div>

                </div>

            </div>

        </div>

        <div class="div-rodape">

            <div class="div-barra-navegacao">

                <button class="b-home">
                    <mat-icon class="mat-icon-button" (click)="goToHome()"> home </mat-icon>
                </button>

                <button class="b-novo-atendimento">
                    <mat-icon class="mat-icon-button" (click)="goToNovoAtendimento()"> add </mat-icon>
                </button>

                <button class="b-pesquisar">
                    <mat-icon class="mat-icon-button" (click)="goToPesquisar()"> search </mat-icon>
                </button>

                <button class="b-outbound">
                    <mat-icon class="mat-icon-button" (click)="goToOutbound()"> call </mat-icon>
                </button>

                <button class="b-agendados">
                    <mat-icon class="mat-icon-button" (click)="goToAgendados()"> calendar_today </mat-icon>
                </button>

                <button class="b-contatos-prioritarios" (click)="goToContatosPrioritarios()">
                    <img src="../../../../assets/gif-telefone-branco-sem-fundo.gif" class="loop-gif-rodape" alt="gif">
                </button>
            </div>

        </div>

    </div>

</div>

<ng-template #loading>
    <mat-spinner [diameter]="25"></mat-spinner>
</ng-template>
